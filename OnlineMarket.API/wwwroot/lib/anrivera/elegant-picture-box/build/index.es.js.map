{"version":3,"file":"index.es.js","sources":["../src/PictureBox/index.tsx","../node_modules/framesync/dist/es/on-next-frame.mjs","../node_modules/framesync/dist/es/create-render-step.mjs","../node_modules/framesync/dist/es/index.mjs","../node_modules/style-inject/dist/style-inject.es.js","../src/PicturesGrid/index.tsx"],"sourcesContent":["// @flow\r\nimport * as React from 'react';\r\ntype Props = {};\r\nconst PictureBox = (props: Props) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<span>1</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PictureBox;\r\n","const defaultTimestep = (1 / 60) * 1000;\nconst getCurrentTime = typeof performance !== \"undefined\"\n    ? () => performance.now()\n    : () => Date.now();\nconst onNextFrame = typeof window !== \"undefined\"\n    ? (callback) => window.requestAnimationFrame(callback)\n    : (callback) => setTimeout(() => callback(getCurrentTime()), defaultTimestep);\n\nexport { defaultTimestep, onNextFrame };\n","function createRenderStep(runNextFrame) {\n    let toRun = [];\n    let toRunNextFrame = [];\n    let numToRun = 0;\n    let isProcessing = false;\n    let flushNextFrame = false;\n    const toKeepAlive = new WeakSet();\n    const step = {\n        schedule: (callback, keepAlive = false, immediate = false) => {\n            const addToCurrentFrame = immediate && isProcessing;\n            const buffer = addToCurrentFrame ? toRun : toRunNextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (buffer.indexOf(callback) === -1) {\n                buffer.push(callback);\n                if (addToCurrentFrame && isProcessing)\n                    numToRun = toRun.length;\n            }\n            return callback;\n        },\n        cancel: (callback) => {\n            const index = toRunNextFrame.indexOf(callback);\n            if (index !== -1)\n                toRunNextFrame.splice(index, 1);\n            toKeepAlive.delete(callback);\n        },\n        process: (frameData) => {\n            if (isProcessing) {\n                flushNextFrame = true;\n                return;\n            }\n            isProcessing = true;\n            [toRun, toRunNextFrame] = [toRunNextFrame, toRun];\n            toRunNextFrame.length = 0;\n            numToRun = toRun.length;\n            if (numToRun) {\n                for (let i = 0; i < numToRun; i++) {\n                    const callback = toRun[i];\n                    callback(frameData);\n                    if (toKeepAlive.has(callback)) {\n                        step.schedule(callback);\n                        runNextFrame();\n                    }\n                }\n            }\n            isProcessing = false;\n            if (flushNextFrame) {\n                flushNextFrame = false;\n                step.process(frameData);\n            }\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","import { onNextFrame, defaultTimestep } from './on-next-frame.mjs';\nimport { createRenderStep } from './create-render-step.mjs';\n\nconst maxElapsed = 40;\nlet useDefaultElapsed = true;\nlet runNextFrame = false;\nlet isProcessing = false;\nconst frame = {\n    delta: 0,\n    timestamp: 0,\n};\nconst stepsOrder = [\n    \"read\",\n    \"update\",\n    \"preRender\",\n    \"render\",\n    \"postRender\",\n];\nconst steps = stepsOrder.reduce((acc, key) => {\n    acc[key] = createRenderStep(() => (runNextFrame = true));\n    return acc;\n}, {});\nconst sync = stepsOrder.reduce((acc, key) => {\n    const step = steps[key];\n    acc[key] = (process, keepAlive = false, immediate = false) => {\n        if (!runNextFrame)\n            startLoop();\n        return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n}, {});\nconst cancelSync = stepsOrder.reduce((acc, key) => {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nconst flushSync = stepsOrder.reduce((acc, key) => {\n    acc[key] = () => steps[key].process(frame);\n    return acc;\n}, {});\nconst processStep = (stepId) => steps[stepId].process(frame);\nconst processFrame = (timestamp) => {\n    runNextFrame = false;\n    frame.delta = useDefaultElapsed\n        ? defaultTimestep\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (runNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nconst startLoop = () => {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing)\n        onNextFrame(processFrame);\n};\nconst getFrameData = () => frame;\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import sync from 'framesync';\r\nimport {\r\n\tanimate,\r\n\tanticipate,\r\n\tbackIn,\r\n\tbackInOut,\r\n\tbackOut,\r\n\tcircIn,\r\n\tcircInOut,\r\n\tcircOut,\r\n\teaseIn,\r\n\teaseInOut,\r\n\teaseOut,\r\n\tlinear,\r\n} from 'popmotion';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport './picturesGrid.scss';\r\nimport {\r\n\tChildCoordinates,\r\n\tCoords,\r\n\tItemCachePosition,\r\n\tItemsProps,\r\n\tPositionCoordinates,\r\n\tPositions,\r\n\tTransition,\r\n} from './types';\r\nconst popmotionEasing: Transition = {\r\n\tanticipate,\r\n\tbackIn,\r\n\tbackInOut,\r\n\tbackOut,\r\n\tcircIn,\r\n\tcircInOut,\r\n\tcircOut,\r\n\teaseIn,\r\n\teaseInOut,\r\n\teaseOut,\r\n\tlinear,\r\n};\r\n\r\nconst DATASET_KEY = 'elegantPictureBoxId';\r\nconst itemCachePosition: ItemCachePosition = {};\r\n\r\nconst toArray = (arrLike: ArrayLike<any>): any[] => {\r\n\tif (!arrLike) return [];\r\n\treturn Array.prototype.slice.call(arrLike);\r\n};\r\n\r\nconst getCurrentPositionChildElement = (\r\n\tgridBoundingClientRect: PositionCoordinates,\r\n\tel: HTMLElement\r\n) => {\r\n\tconst { top, left, width, height } = el.getBoundingClientRect();\r\n\tconst rect = { top, left, width, height };\r\n\trect.top -= gridBoundingClientRect.top;\r\n\trect.left -= gridBoundingClientRect.left;\r\n\t// if an element is display:none it will return top: 0 and left:0\r\n\t// rather than saying it's still in the containing element\r\n\t// so we need to use Math.max to make sure the coordinates stay\r\n\t// within the container\r\n\trect.top = Math.max(rect.top, 0);\r\n\trect.left = Math.max(rect.left, 0);\r\n\r\n\treturn rect;\r\n};\r\n\r\nconst applyTransform = (\r\n\tel: HTMLElement,\r\n\t{ translateX, translateY, scaleX, scaleY }: Coords,\r\n\t{ immediate }: { immediate?: boolean } = {}\r\n) => {\r\n\tconst isFinished = translateX === 0 && translateY === 0 && scaleX === 1 && scaleY === 1;\r\n\r\n\tconst styleEl = () => {\r\n\t\tel.style.transform = isFinished\r\n\t\t\t? ''\r\n\t\t\t: `translateX(${translateX}px) translateY(${translateY}px) scaleX(${scaleX}) scaleY(${scaleY})`;\r\n\t};\r\n\tif (immediate) styleEl();\r\n\telse sync.render(styleEl);\r\n\r\n\tconst firstChild = el.children[0] as HTMLElement;\r\n\r\n\tif (firstChild) {\r\n\t\tconst styleChild = () => {\r\n\t\t\tfirstChild.style.transform = isFinished ? '' : `scaleX(${1 / scaleX}) scaleY(${1 / scaleY})`;\r\n\t\t};\r\n\r\n\t\tif (immediate) styleChild();\r\n\t\telse sync.render(styleChild);\r\n\t}\r\n};\r\n\r\nconst registerPositions = (\r\n\tgridBoundingClientRect: PositionCoordinates,\r\n\telements: HTMLCollectionOf<HTMLElement> | HTMLElement[]\r\n) => {\r\n\tconst childrenElements = toArray(elements);\r\n\tchildrenElements.forEach((el) => {\r\n\t\tif (typeof el.getBoundingClientRect !== 'function') return;\r\n\r\n\t\t//agregar propiedad data-aniamted-grid-id con un ID\r\n\t\tif (!el.dataset[DATASET_KEY]) el.dataset[DATASET_KEY] = `${Math.random()}`;\r\n\r\n\t\tconst animatedGridId = el.dataset[DATASET_KEY] as string;\r\n\r\n\t\tif (!itemCachePosition[animatedGridId]) itemCachePosition[animatedGridId] = {} as Positions;\r\n\r\n\t\tconst currentPositionChildElement = getCurrentPositionChildElement(gridBoundingClientRect, el);\r\n\r\n\t\titemCachePosition[animatedGridId].childElement = currentPositionChildElement;\r\n\t\titemCachePosition[animatedGridId].parentElement = gridBoundingClientRect;\r\n\t});\r\n};\r\n\r\nconst stopCurrentTransitions = (container: HTMLElement) => {\r\n\tconst childrenElements = toArray(container.children) as HTMLElement[];\r\n\tchildrenElements.filter((el) => {\r\n\t\tconst position = itemCachePosition[el.dataset[DATASET_KEY] as string];\r\n\t\tif (position && position.stop) {\r\n\t\t\tposition.stop();\r\n\t\t\tdelete position.stop;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\tchildrenElements.forEach((el) => {\r\n\t\tel.style.transform = '';\r\n\t\tconst firstChild = el.children[0] as HTMLElement;\r\n\t\tif (firstChild) firstChild.style.transform = '';\r\n\t});\r\n\r\n\treturn childrenElements;\r\n};\r\n\r\nconst getNewPositions = (\r\n\tgridBoundingClientRect: PositionCoordinates,\r\n\tchildrenElements: HTMLElement[]\r\n) => {\r\n\tconst positionGridChildren = childrenElements.map((el) => ({\r\n\t\tchildCoords: {} as ChildCoordinates,\r\n\t\tel,\r\n\t\tcurrentPositionChildElement: getCurrentPositionChildElement(gridBoundingClientRect, el),\r\n\t}));\r\n\r\n\tpositionGridChildren.filter(({ el, currentPositionChildElement }) => {\r\n\t\tconst position = itemCachePosition[el.dataset[DATASET_KEY] as string];\r\n\r\n\t\tif (!position) {\r\n\t\t\tregisterPositions(currentPositionChildElement, [el]);\r\n\t\t\treturn false;\r\n\t\t} else if (\r\n\t\t\tgridBoundingClientRect.top === position.childElement.top &&\r\n\t\t\tgridBoundingClientRect.left === position.childElement.left &&\r\n\t\t\tgridBoundingClientRect.width === position.childElement.width &&\r\n\t\t\tgridBoundingClientRect.height === position.childElement.height\r\n\t\t) {\r\n\t\t\t// if it hasn't moved, dont animate it\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tpositionGridChildren.forEach(({ el }) => {\r\n\t\tif (toArray(el.children).length > 1) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'Make sure every grid item has a single container element surrounding its children'\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\r\n\tif (!positionGridChildren.length) return;\r\n\r\n\tpositionGridChildren\r\n\t\t// do this measurement first so as not to cause layout thrashing\r\n\t\t.map((data) => {\r\n\t\t\tconst firstChild = data.el.children[0] as HTMLElement;\r\n\r\n\t\t\tif (firstChild)\r\n\t\t\t\tdata.childCoords = getCurrentPositionChildElement(gridBoundingClientRect, firstChild);\r\n\r\n\t\t\treturn data;\r\n\t\t});\r\n\r\n\treturn positionGridChildren;\r\n};\r\n\r\nconst startAnimation = (\r\n\tgridBoundingClientRect: PositionCoordinates,\r\n\tpositionGridChildren: any,\r\n\ttransition: keyof Transition,\r\n\tduration: number,\r\n\ttimeOut: number\r\n) => {\r\n\tpositionGridChildren.forEach(\r\n\t\t(\r\n\t\t\t{\r\n\t\t\t\tel,\r\n\t\t\t\tcurrentPositionChildElement: { top, left, width, height },\r\n\t\t\t\tchildCoords: { top: childTop, left: childLeft },\r\n\t\t\t},\r\n\t\t\ti\r\n\t\t) => {\r\n\t\t\tconst firstChild = el.children[0] as HTMLElement;\r\n\t\t\tconst position = itemCachePosition[el.dataset[DATASET_KEY] as string];\r\n\t\t\tconst coords: Coords = {\r\n\t\t\t\tscaleX: position.childElement.width / width,\r\n\t\t\t\tscaleY: position.childElement.height / height,\r\n\t\t\t\ttranslateX: position.childElement.left - left,\r\n\t\t\t\ttranslateY: position.childElement.top - top,\r\n\t\t\t};\r\n\r\n\t\t\tel.style.transformOrigin = '0 0';\r\n\r\n\t\t\tif (firstChild) {\r\n\t\t\t\tfirstChild.style.transformOrigin = '0 0';\r\n\t\t\t\tfirstChild.style.transition = '10s';\r\n\t\t\t}\r\n\r\n\t\t\tapplyTransform(el, coords, { immediate: true });\r\n\r\n\t\t\tif (!popmotionEasing[transition]) throw new Error(`${transition} is not a valid easing name`);\r\n\r\n\t\t\tconst init = () => {\r\n\t\t\t\tconst animation = animate({\r\n\t\t\t\t\tfrom: coords,\r\n\t\t\t\t\tto: { translateX: 0, translateY: 0, scaleX: 1, scaleY: 1 },\r\n\t\t\t\t\tduration: duration,\r\n\t\t\t\t\tease: popmotionEasing[transition],\r\n\t\t\t\t\tonUpdate: (transforms: Coords) => {\r\n\t\t\t\t\t\tapplyTransform(el, transforms);\r\n\t\t\t\t\t\tsync.postRender(() => registerPositions(gridBoundingClientRect, [el]));\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\tposition.stop = () => animation.stop;\r\n\t\t\t};\r\n\t\t\tconst timeoutId = setTimeout(() => {\r\n\t\t\t\tsync.update(init);\r\n\t\t\t}, timeOut * i);\r\n\t\t\tposition.stop = () => clearTimeout(timeoutId);\r\n\t\t}\r\n\t);\r\n};\r\n\r\nconst PicturesGrid = ({ items, transition, duration, timeOut }: ItemsProps) => {\r\n\tconst gridRef = useRef<HTMLDivElement>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst grid: HTMLElement = gridRef.current;\r\n\t\tconst gridsItemPosition: PositionCoordinates = grid.getBoundingClientRect();\r\n\r\n\t\tregisterPositions(gridsItemPosition, grid.children as HTMLCollectionOf<HTMLElement>);\r\n\r\n\t\tconst childrenElement = stopCurrentTransitions(grid);\r\n\r\n\t\tgrid.addEventListener('click', (ev) => {\r\n\t\t\tlet target = ev.target as any;\r\n\r\n\t\t\tif (target.tagName === 'IMG') {\r\n\t\t\t\tconst elParent = target.parentElement['parentElement'];\r\n\t\t\t\t//target.parentElement.classList.toggle('zoom');\r\n\t\t\t\telParent.classList.toggle('zoom');\r\n\r\n\t\t\t\tconst newPositions = getNewPositions(gridsItemPosition, childrenElement);\r\n\t\t\t\tstartAnimation(gridsItemPosition, newPositions, transition, duration, timeOut);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div ref={gridRef} className='grid'>\r\n\t\t\t{items.map((item, index) => (\r\n\t\t\t\t<div className='card' key={index}>\r\n\t\t\t\t\t<div className='item'>\r\n\t\t\t\t\t\t<img src={item.img} alt={item.name} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PicturesGrid;"],"names":["React"],"mappings":"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"}